---
import PlotFigure from "../components/PlotFigure.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";
import data from "../assets/data.json";
import presidents from "../assets/presidents.json";
---

<html lang="en">
	<body>
		<main>
			<div>
				<PlotFigure
					options={{
						marks: [
							Plot.dot(penguins, {
								x: "culmen_length_mm",
								y: "culmen_depth_mm",
							}),
						],
					}}
				/>
			</div>

			<div>
				<PlotFigure
					options={{
						x: { axis: null },
						y: { tickFormat: "s", grid: true },
						color: { scheme: "spectral", legend: true },
						marks: [
							Plot.barY(data, {
								x: "key",
								y: "population",
								fill: "key",
								fx: "state",
								sort: {
									x: null,
									color: null,
									fx: { value: "-y", reduce: "sum" },
								},
							}),
							Plot.ruleY([0]),
						],
					}}
				/>
			</div>

			<div>
				<PlotFigure
					options={{
						x: { inset: 20, label: "First inauguration date →" },
						y: {
							insetTop: 4,
							grid: true,
							label: "↑ Any opinion (%)",
							tickFormat: "+f",
						},
						marks: [
							Plot.ruleY([0]),
							Plot.image(presidents, {
								x: "First Inauguration Date",
								y: (d) =>
									d["Very Favorable %"] +
									d["Somewhat Favorable %"] +
									d["Very Unfavorable %"] +
									d["Somewhat Unfavorable %"],
								src: "Portrait URL",
								r: 20,
								preserveAspectRatio: "xMidYMin slice",
								title: "Name",
							}),
						],
					}}
				/>
			</div>
		</main>
	</body>
</html>
